import{r as l,b as p,j as e,h as d}from"./index-960916c4.js";import{u as x}from"./index.esm-67e83d3f.js";import{u as f}from"./useQuery-40cf9028.js";const j=({id:t})=>f({queryKey:["user"],queryFn:()=>d.get(`/user/${t}`)}),b=async t=>await d.post("/user/1",t),F=()=>{const{isLoading:t,data:s,isFetched:a,isError:u}=j({id:"1"});l.useEffect(()=>{a&&m(s)},[a]);const{register:n,handleSubmit:o,reset:m,formState:{isSubmitting:r}}=x({mode:"onChange",defaultValues:l.useMemo(()=>s||{},[s])}),{mutateAsync:c}=p(b,{onSuccess:({message:i})=>alert(i),onError:i=>alert(i)}),h=i=>c(i);return u?e.jsx("div",{children:"Failed to fetch"}):e.jsxs(e.Fragment,{children:[e.jsx("h2",{children:"Profile"}),e.jsx("p",{children:t&&"Loading..."}),e.jsx("div",{style:{width:400},children:e.jsx("form",{onSubmit:o(h),children:e.jsxs("fieldset",{children:[a&&s?e.jsx("img",{src:s.avatar,alt:`${s.first_name} ${s.last_name}`,width:s.avatar_size_width,height:s.avatar_size_height,style:{backgroundColor:"#F6F8FA"}}):null,e.jsx("label",{htmlFor:"email",children:"email"}),e.jsx("input",{type:"email",id:"email",disabled:r,...n("email",{required:!0})}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",columnGap:"10px"},children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"first_name",children:"first name"}),e.jsx("input",{id:"first_name",disabled:r,...n("first_name",{required:!0})})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"last_name",children:"last name"}),e.jsx("input",{id:"last_name",disabled:r,...n("last_name",{required:!0})})]})]}),e.jsx("input",{type:"submit",value:r?"Submitting...":"Update",disabled:r})]})})})]})};export{F as default};
