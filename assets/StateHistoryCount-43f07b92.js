import{r as E,s as m,e as w,j as n}from"./index-445d451c.js";const b=t=>{let r;const e=new Set,s=(u,v)=>{const i=typeof u=="function"?u(r):u;if(!Object.is(i,r)){const h=r;r=v??typeof i!="object"?i:Object.assign({},r,i),e.forEach(f=>f(r,h))}},o=()=>r,x={setState:s,getState:o,subscribe:u=>(e.add(u),()=>e.delete(u)),destroy:()=>{e.clear()}};return r=t(s,o,x),x},R=t=>t?b(t):b;var g={exports:{}},C={};/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var j=E,D=m;function k(t,r){return t===r&&(t!==0||1/t===1/r)||t!==t&&r!==r}var O=typeof Object.is=="function"?Object.is:k,P=D.useSyncExternalStore,B=j.useRef,V=j.useEffect,N=j.useMemo,U=j.useDebugValue;C.useSyncExternalStoreWithSelector=function(t,r,e,s,o){var d=B(null);if(d.current===null){var a={hasValue:!1,value:null};d.current=a}else a=d.current;d=N(function(){function u(l){if(!v){if(v=!0,i=l,l=s(l),o!==void 0&&a.hasValue){var p=a.value;if(o(p,l))return h=p}return h=l}if(p=h,O(i,l))return p;var S=s(l);return o!==void 0&&o(p,S)?p:(i=l,h=S)}var v=!1,i,h,f=e===void 0?null:e;return[function(){return u(r())},f===null?void 0:function(){return u(f())}]},[r,e,s,o]);var x=P(t,d[0],d[1]);return V(function(){a.hasValue=!0,a.value=x},[x]),U(x),x};g.exports=C;var A=g.exports;const H=w(A),{useSyncExternalStoreWithSelector:I}=H;function T(t,r=t.getState,e){const s=I(t.subscribe,t.getState,t.getServerState||t.getState,r,e);return E.useDebugValue(s),s}const y=t=>{const r=typeof t=="function"?R(t):t,e=(s,o)=>T(r,s,o);return Object.assign(e,r),e},_=t=>t?y(t):y,c=_((t,r)=>({prev:[],curr:0,next:[],getCurr:()=>r().curr,hasPrev:()=>r().prev.length>0,hasNext:()=>r().next.length>0,undo:()=>t(e=>({prev:e.prev.slice(0,e.prev.length-1),curr:e.prev[e.prev.length-1],next:[e.curr,...e.next]})),redo:()=>t(e=>({prev:[...e.prev,e.curr],curr:e.next[0],next:e.next.slice(1)})),set:e=>t(s=>({prev:[...s.prev,s.curr],curr:e,next:[]})),reset:e=>t({prev:[],curr:e,next:[]})})),F=()=>{const t=c(r=>r.curr);return n.jsx("h3",{"data-testid":"count",children:t})},M=()=>{const t=c(e=>e.undo),r=c(e=>e.hasPrev());return n.jsx("button",{"data-testid":"button-undo",onClick:t,disabled:!r,children:"Undo"})},G=()=>{const t=c(e=>e.redo),r=c(e=>e.hasNext());return n.jsx("button",{"data-testid":"button-redo",onClick:t,disabled:!r,children:"Redo"})},L=()=>{const t=c(s=>s.getCurr),r=c(s=>s.set),e=c(s=>s.hasNext());return n.jsxs(n.Fragment,{children:[n.jsx("button",{disabled:e,onClick:()=>r(t()-1),"data-testid":"button-decrease",children:"-"}),n.jsx("button",{disabled:e,onClick:()=>r(t()+1),"data-testid":"button-increase",children:"+"})]})},W=()=>{const t=c(r=>r.reset);return n.jsx("button",{onClick:()=>t(0),style:{width:"100%"},"data-testid":"button-clear-history",children:"Clear history stack"})},q=()=>{const{prev:t,curr:r,next:e}=c(s=>s);return n.jsxs("div",{"data-testid":"history",children:[n.jsx("h3",{children:"History stack"}),n.jsx("table",{children:n.jsxs("tbody",{children:[[...e].reverse().map((s,o)=>n.jsx("tr",{children:n.jsx("td",{style:{color:"#333"},children:s})},o)),n.jsx("tr",{children:n.jsx("td",{style:{color:"blue"},children:r})}),[...t].reverse().map((s,o)=>n.jsx("tr",{children:n.jsx("td",{style:{color:"#999"},children:s})},o))]})})]})},J=()=>n.jsxs(n.Fragment,{children:[n.jsx("h2",{children:"Undo/Redo (History)"}),n.jsxs("div",{style:{width:500,display:"flex",justifyContent:"space-between"},children:[n.jsxs("div",{style:{width:200},children:[n.jsx(F,{}),n.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",rowGap:"10px",columnGap:"10px"},children:[n.jsx(L,{}),n.jsx(M,{}),n.jsx(G,{}),n.jsx("div",{style:{gridColumnStart:1,gridColumnEnd:3},children:n.jsx(W,{})})]})]}),n.jsx(q,{})]})]});export{J as default};
